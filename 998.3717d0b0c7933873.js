"use strict";(self.webpackChunkdofus_cosecha=self.webpackChunkdofus_cosecha||[]).push([[998],{998:(Co,J,d)=>{d.r(J),d.d(J,{EDITABLE:()=>P,HarvestComponent:()=>bo});var p=d(4755),t=d(2223),f=d(8184),_=d(7188),k=d(3353),v=d(4080),w=d(9521),D=d(7579),G=d(9770),W=d(9646),q=d(445),Q=d(8675);function Ot(o,n){}class O{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let K=(()=>{class o extends v.en{constructor(e,i,a,s,r,l,c,h){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=r,this._ngZone=l,this._overlayRef=c,this._focusMonitor=h,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=m=>{this._portalOutlet.hasAttached();const y=this._portalOutlet.attachDomPortal(m);return this._contentAttached(),y},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=a}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const a=()=>{e.removeEventListener("blur",a),e.removeEventListener("mousedown",a),e.removeAttribute("tabindex")};e.addEventListener("blur",a),e.addEventListener("mousedown",a)})),e.focus(i)}_focusByCssSelector(e,i){let a=this._elementRef.nativeElement.querySelector(e);a&&this._forceFocus(a,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const a=(0,k.ht)(),s=this._elementRef.nativeElement;(!a||a===this._document.body||a===s||s.contains(a))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=(0,k.ht)();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,k.ht)())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(_.qV),t.Y36(p.K0,8),t.Y36(O),t.Y36(_.ic),t.Y36(t.R0b),t.Y36(f.Iu),t.Y36(_.tE))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cdk-dialog-container"]],viewQuery:function(e,i){if(1&e&&t.Gf(v.Pl,7),2&e){let a;t.iGM(a=t.CRH())&&(i._portalOutlet=a.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,i){2&e&&t.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&t.YNc(0,Ot,0,0,"ng-template",0)},dependencies:[v.Pl],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),o})();class R{constructor(n,e){this.overlayRef=n,this.config=e,this.closed=new D.x,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===w.hY&&!this.disableClose&&!(0,w.Vb)(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(n,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(n),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const X=new t.OlP("DialogScrollStrategy"),Ft=new t.OlP("DialogData"),Et=new t.OlP("DefaultDialogConfig"),Pt={provide:X,deps:[f.aV],useFactory:function It(o){return()=>o.scrollStrategies.block()}};let kt=0,tt=(()=>{class o{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,a,s,r,l){this._overlay=e,this._injector=i,this._defaultOptions=a,this._parentDialog=s,this._overlayContainer=r,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new D.x,this._afterOpenedAtThisLevel=new D.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,G.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Q.O)(void 0))),this._scrollStrategy=l}open(e,i){(i={...this._defaultOptions||new O,...i}).id=i.id||"cdk-dialog-"+kt++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),r=this._overlay.create(s),l=new R(r,i),c=this._attachContainer(r,l,i);return l.containerInstance=c,this._attachDialogContent(e,l,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){H(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){H(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),H(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new f.X_({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,a){const s=a.injector||a.viewContainerRef?.injector,r=[{provide:O,useValue:a},{provide:R,useValue:i},{provide:f.Iu,useValue:e}];let l;a.container?"function"==typeof a.container?l=a.container:(l=a.container.type,r.push(...a.container.providers(a))):l=K;const c=new v.C5(l,a.viewContainerRef,t.zs3.create({parent:s||this._injector,providers:r}),a.componentFactoryResolver);return e.attach(c).instance}_attachDialogContent(e,i,a,s){if(e instanceof t.Rgc){const r=this._createInjector(s,i,a,void 0);let l={$implicit:s.data,dialogRef:i};s.templateContext&&(l={...l,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),a.attachTemplatePortal(new v.UE(e,null,l,r))}else{const r=this._createInjector(s,i,a,this._injector),l=a.attachComponentPortal(new v.C5(e,s.viewContainerRef,r,s.componentFactoryResolver));i.componentInstance=l.instance}}_createInjector(e,i,a,s){const r=e.injector||e.viewContainerRef?.injector,l=[{provide:Ft,useValue:e.data},{provide:R,useValue:i}];return e.providers&&("function"==typeof e.providers?l.push(...e.providers(i,e,a)):l.push(...e.providers)),e.direction&&(!r||!r.get(q.Is,null,{optional:!0}))&&l.push({provide:q.Is,useValue:{value:e.direction,change:(0,W.of)()}}),t.zs3.create({parent:r||s,providers:l})}_removeOpenDialog(e,i){const a=this.openDialogs.indexOf(e);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,r)=>{s?r.setAttribute("aria-hidden",s):r.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let a=i.length-1;a>-1;a--){const s=i[a];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.aV),t.LFG(t.zs3),t.LFG(Et,8),t.LFG(o,12),t.LFG(f.Xj),t.LFG(X))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function H(o,n){let e=o.length;for(;e--;)n(o[e])}let Rt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[tt,Pt],imports:[f.U8,v.eL,_.rt,v.eL]}),o})();var et=d(1281),Ht=d(6451),b=d(9300),L=d(5698),ot=d(3238);function Lt(o,n){}d(1591);class F{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Z="mdc-dialog--open",it="mdc-dialog--opening",nt="mdc-dialog--closing";let Nt=(()=>{class o extends K{constructor(e,i,a,s,r,l,c,h){super(e,i,a,s,r,l,c,h),this._animationStateChanged=new t.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(_.qV),t.Y36(p.K0,8),t.Y36(F),t.Y36(_.ic),t.Y36(t.R0b),t.Y36(f.Iu),t.Y36(_.tE))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),o})();const at="--mat-dialog-transition-duration";function st(o){return null==o?null:"number"==typeof o?o:o.endsWith("ms")?(0,et.su)(o.substring(0,o.length-2)):o.endsWith("s")?1e3*(0,et.su)(o.substring(0,o.length-1)):"0"===o?0:null}let Yt=(()=>{class o extends Nt{constructor(e,i,a,s,r,l,c,h,m){super(e,i,a,s,r,l,c,m),this._animationMode=h,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?st(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?st(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(at,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(it,Z)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Z),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(Z),this._animationsEnabled?(this._hostElement.style.setProperty(at,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(nt)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(it,nt)}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(_.qV),t.Y36(p.K0,8),t.Y36(F),t.Y36(_.ic),t.Y36(t.R0b),t.Y36(f.Iu),t.Y36(t.QbO,8),t.Y36(_.tE))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(e,i){2&e&&(t.Ikx("id",i._config.id),t.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),t.ekj("_mat-animation-noopable",!i._animationsEnabled))},features:[t.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Lt,0,0,"ng-template",2),t.qZA()())},dependencies:[v.Pl],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),o})();class rt{constructor(n,e,i){this._ref=n,this._containerInstance=i,this._afterOpened=new D.x,this._beforeClosed=new D.x,this._state=0,this.disableClose=e.disableClose,this.id=n.id,i._animationStateChanged.pipe((0,b.h)(a=>"opened"===a.state),(0,L.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe((0,b.h)(a=>"closed"===a.state),(0,L.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Ht.T)(this.backdropClick(),this.keydownEvents().pipe((0,b.h)(a=>a.keyCode===w.hY&&!this.disableClose&&!(0,w.Vb)(a)))).subscribe(a=>{this.disableClose||(a.preventDefault(),function Ut(o,n,e){o._closeInteractionType=n,o.close(e)}(this,"keydown"===a.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe((0,b.h)(e=>"closing"===e.state),(0,L.q)(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const lt=new t.OlP("MatMdcDialogData"),zt=new t.OlP("mat-mdc-dialog-default-options"),ct=new t.OlP("mat-mdc-dialog-scroll-strategy"),jt={provide:ct,deps:[f.aV],useFactory:function $t(o){return()=>o.scrollStrategies.block()}};let Vt=0,Jt=(()=>{class o{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,a,s,r,l,c,h,m,y){this._overlay=e,this._defaultOptions=a,this._parentDialog=s,this._dialogRefConstructor=c,this._dialogContainerType=h,this._dialogDataToken=m,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new D.x,this._afterOpenedAtThisLevel=new D.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=F,this.afterAllClosed=(0,G.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Q.O)(void 0))),this._scrollStrategy=l,this._dialog=i.get(tt)}open(e,i){let a;(i={...this._defaultOptions||new F,...i}).id=i.id||`${this._idPrefix}${Vt++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:O,useValue:i}]},templateContext:()=>({dialogRef:a}),providers:(r,l,c)=>(a=new this._dialogRefConstructor(r,i,c),a.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:a}])});return a.componentInstance=s.componentInstance,this.openDialogs.push(a),this.afterOpened.next(a),a.afterClosed().subscribe(()=>{const r=this.openDialogs.indexOf(a);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||this._getAfterAllClosed().next())}),a}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return o.\u0275fac=function(e){t.$Z()},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),E=(()=>{class o extends Jt{constructor(e,i,a,s,r,l,c,h){super(e,i,s,l,c,r,rt,Yt,lt,h),this._idPrefix="mat-mdc-dialog-"}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(f.aV),t.LFG(t.zs3),t.LFG(p.Ye,8),t.LFG(zt,8),t.LFG(ct),t.LFG(o,12),t.LFG(f.Xj),t.LFG(t.QbO,8))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),dt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[E,jt],imports:[Rt,f.U8,v.eL,ot.BQ,ot.BQ]}),o})();var S=d(2480),pt=d(8101),Gt=d(5266),u=d(9401),gt=d(1864),C=d(430),B=d(483);class N{static generate(n){return[...new Array(n)].map(()=>!0)}static mapToFormGroup(n){return n.reduce((e,i,a)=>(e[a+1]=[i],e),{})}static mapToFormValue(n,e){return n.reduce((i,a,s)=>(i[s+1]=e,i),{})}}function Wt(o,n){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"input",4),t.TgZ(2,"label",5),t._uU(3),t.qZA()()),2&o){const e=n.index;t.xp6(1),t.Q6J("formControlName",e+1)("id","etapa-"+(e+1)),t.xp6(1),t.Q6J("for","etapa-"+(e+1)),t.xp6(1),t.Oqu("Etapa "+(e+1))}}let Y=(()=>{class o{constructor(){this.formBuilder=(0,t.f3M)(u.qu),this.dialogRef=(0,t.f3M)(rt),this.data=(0,t.f3M)(lt)}ngOnInit(){this.steps=this.data,this.initializeStepsForm(this.data)}setAllControls(e,i){this.form.setValue(N.mapToFormValue(e,i))}applySteps(){this.dialogRef.close(this.form.value)}closeModal(){this.dialogRef.close()}initializeStepsForm(e){this.form=this.formBuilder.group(N.mapToFormGroup(e))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-harvest-step-modal"]],standalone:!0,features:[t.jDz],decls:13,vars:2,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],[1,"actions"],[3,"click"],["type","checkbox",3,"formControlName","id"],[3,"for"]],template:function(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Etapas"),t.qZA(),t.TgZ(2,"form",0),t.YNc(3,Wt,4,4,"div",1),t.qZA(),t.TgZ(4,"div",2)(5,"app-button",3),t.NdJ("click",function(){return i.setAllControls(i.steps,!0)}),t._uU(6,"Marcar todas"),t.qZA(),t.TgZ(7,"app-button",3),t.NdJ("click",function(){return i.setAllControls(i.steps,!1)}),t._uU(8,"Desmarcar todas"),t.qZA(),t.TgZ(9,"app-button",3),t.NdJ("click",function(){return i.applySteps()}),t._uU(10,"Aplicar"),t.qZA(),t.TgZ(11,"app-button",3),t.NdJ("click",function(){return i.closeModal()}),t._uU(12,"Cancelar"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngForOf",i.steps))},dependencies:[p.ez,p.sg,u.UX,u._Y,u.Wl,u.JJ,u.JL,u.sg,u.u,B.r],styles:["[_nghost-%COMP%]{display:block;padding:2rem;accent-color:#ffdd00}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-rows:repeat(9,1fr);column-gap:2rem;row-gap:1rem;grid-auto-flow:column}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:1rem;width:100%;margin-top:2rem;justify-content:left}"]}),o})();var qt=d(8372),A=d(4004),Qt=d(188),Kt=d(9841);let Xt=(()=>{class o{transform(e,i,a,s){let r=0;return e.map(l=>{const c={...l,commands:this.getSliceCommands(l,i,a,s),offset:3.6*r*-1};return r+=l.percent,c})}getSliceCommands(e,i,a,s){const r=this.percentToDegrees(e.percent),l=r>180?1:0,c=i-s,h=[];return h.push(`M ${a/2+i} ${a/2}`),h.push(`A ${i} ${i} 0 ${l} 0 ${this.getCoordFromDegrees(r,i,a)}`),h.push(`L ${this.getCoordFromDegrees(r,c,a)}`),h.push(`A ${c} ${c} 0 ${l} 1 ${a/2+c} ${a/2}`),h.join(" ")}getCoordFromDegrees(e,i,a){return[Math.cos(e*Math.PI/180)*i+a/2,Math.sin(e*Math.PI/180)*-i+a/2].join(" ")}percentToDegrees(e){return 3.6*e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"chartPipe",type:o,pure:!0,standalone:!0}),o})();function te(o,n){if(1&o){const e=t.EpF();t.O4$(),t.TgZ(0,"path",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.onClickCb?s.onClickCb():null)}),t.TgZ(1,"title"),t._uU(2),t.qZA()()}if(2&o){const e=n.$implicit,i=t.oxw(2).$implicit;t.uIk("fill",e.color)("d",e.commands)("transform","rotate("+e.offset+")"),t.xp6(2),t.Oqu(i(e.label||""))}}function ee(o,n){if(1&o&&(t.O4$(),t.TgZ(0,"svg"),t.YNc(1,te,3,4,"path",3),t.ALo(2,"chartPipe"),t.qZA()),2&o){const e=t.oxw(2);t.uIk("viewBox",e.viewBoxAttr),t.xp6(1),t.Q6J("ngForOf",t.gM2(2,3,e.data,e.radius,e.viewBox,e.borderSize))("ngForTrackBy",e.trackByFn)}}function oe(o,n){if(1&o&&(t.ynx(0),t.YNc(1,ee,3,8,"svg",1),t.TgZ(2,"div",2)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"h1"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA()(),t.BQk()),2&o){const e=n.$implicit,i=t.oxw();let a,s,r;t.xp6(1),t.Q6J("ngIf",i.data),t.xp6(3),t.Oqu(e((null==(a=i.data.at(0))?null:a.label)||"")),t.xp6(2),t.hij("",null==(s=i.data.at(0))||null==s.percent?null:s.percent.toFixed(2),"%"),t.xp6(2),t.AsE("",null==(r=i.data.at(0))?null:r.current," / ",null==(r=i.data.at(0))?null:r.amount,"")}}let ie=(()=>{class o{constructor(){this.radius=80,this.viewBox=170,this.borderSize=15,this.data=[]}ngOnInit(){const e=this.data?.reduce((i,a)=>i+a.percent,0);if(100!==e)throw new Error(`The sum of all slices of the donut chart must equal to 100%. Found: ${e}.`);this.viewBoxAttr=`0 0 ${this.viewBox} ${this.viewBox}`}trackByFn(e,i){return i.id}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-chart"]],inputs:{radius:"radius",viewBox:"viewBox",borderSize:"borderSize",data:"data"},standalone:!0,features:[t.jDz],decls:1,vars:0,consts:[[4,"transloco"],[4,"ngIf"],[1,"label"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"]],template:function(e,i){1&e&&t.YNc(0,oe,9,5,"ng-container",0)},dependencies:[p.ez,p.sg,p.O5,Xt,C.y4,C.KI],styles:["[_nghost-%COMP%]{height:225px}svg[_ngcontent-%COMP%]{overflow:visible;width:100%;aspect-ratio:1/1;transform:rotate(270deg) rotateX(180deg)}.label[_ngcontent-%COMP%]{position:relative;bottom:62%;text-align:center}path[_ngcontent-%COMP%]{transform-origin:center;opacity:.7;cursor:pointer}path[_ngcontent-%COMP%]:hover{opacity:1}"],changeDetection:0}),o})();var ne=d(872),ut=d(2340),ae=d(5855),U=d(4168),z=d(3900),I=d(8505),se=d(4351),re=d(262),le=d(3144);let ce=(()=>{class o{constructor(){this.URL=ut.N.apiUrl,this.http=(0,t.f3M)(le.eN)}get(e){return this.http.get(`${this.URL}/harvest/${e??""}`)}update(e){return this.http.post(`${this.URL}/harvest`,e)}completeSteps(e){return this.http.post(`${this.URL}/harvest/complete`,{steps:e})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class de{constructor(n){this.maxResults=n.maxResults||12,this.validators=n.validators||[]}getDataSet(n,e,i=0){const a=this.filterDataset(n,e);return{page:i,next:i+1<Math.ceil(a.length/this.maxResults)?i+1:null,previous:i>0?i-1:null,dataSet:a.slice(i*this.maxResults,(i+1)*this.maxResults)}}filterDataset(n,e){return n.reduce((i,a)=>{try{this.validators.forEach(s=>s(a,e)),i.push(a)}catch{}return i},[])}}class he{static calculatePercentage(n,e){return Number(n/e*100)||.001}}var pe=d(515);const mt=new t.OlP("CHART_TYPE_DATA"),ge={provide:mt,useValue:[{callback:o=>o.captured&&0===o.type,label:"home.monsters",colors:["#8E24AA","#BA68C877"],amount:299},{callback:o=>o.captured&&1===o.type,label:"home.bosses",colors:["#00ACC1","#4DD0E177"],amount:51},{callback:o=>o.captured&&2===o.type,label:"home.archis",colors:["#C0CA33","#DCE77577"],amount:286},{callback:o=>o.captured,label:"home.total",colors:["#FFB300","#FFD54F77"],amount:636}]};class ft{static normalize(n){return n.normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase()}}const _t=new t.OlP("HARVEST_FILTER"),ue={state:{showRepeatedOnly:!1,showCaptured:!0,search:"",steps:N.generate(34),monsters:!0,bosses:!0,archis:!0},validators:[(o,n)=>{if(n.showRepeatedOnly&&!o.amount)throw new Error("Repeated Only")},(o,n)=>{if(!n.showCaptured&&o.captured)throw new Error("Show Captured")},(o,n)=>{if(!n?.steps?.[o.step-1])throw new Error("Steps")},(o,n)=>{if(!n.monsters&&0===o.type)throw new Error("Filter Monsters")},(o,n)=>{if(!n.bosses&&1===o.type)throw new Error("Filter Bosses")},(o,n)=>{if(!n.archis&&2===o.type)throw new Error("Filter Archis")},(o,n)=>{const{name:e,zone:i,subzone:a}=o;if(n.search&&!Object.values({name:e,zone:i,subzone:a}).map(s=>ft.normalize(s)).some(s=>s.includes(ft.normalize(n.search))))throw new Error("Filter Search")}]},me={provide:_t,useValue:ue};let vt=(()=>{class o{constructor(){this.harvestFilter=(0,t.f3M)(_t)}applyFilters(e,i){this.harvestFilter.validators.forEach(a=>a(e,i))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();const fe={statistics:[],originalData:[],harvest:[],harvestId:"",filters:null,page:0,next:null,previous:null};let x=(()=>{class o extends U.m1{constructor(e){super({...fe,filters:e.harvestFilter.state}),this.harvestFilter=e,this.router=(0,t.f3M)(S.F0),this.toast=(0,t.f3M)(gt.jE),this.globalStore=(0,t.f3M)(pt.o),this.harvestDataService=(0,t.f3M)(ce),this.chartData=(0,t.f3M)(mt),this.translate=(0,t.f3M)(C.Vn),this.harvest$=this.select(({harvest:i})=>i),this.harvestId$=this.select(({harvestId:i})=>i),this.steps$=this.select(({filters:i})=>i?.steps),this.statistics$=this.select(({statistics:i})=>i),this.getData=this.effect(i=>i.pipe((0,z.w)(a=>this.harvestDataService.get(a).pipe((0,U._b)(s=>this.setData(s),()=>{this.toast.error("Error en el servidor",{icon:"\u26a0\ufe0f"}),a&&this.router.navigate(["/"])}))))),this.completeSteps=this.effect(i=>i.pipe((0,z.w)(a=>this.harvestDataService.completeSteps(a).pipe((0,U._b)(s=>this.setData(s),s=>{this.toast.error(String(s),{icon:"\u26a0\ufe0f"})}))))),this.updateData=this.effect(i=>i.pipe((0,z.w)(a=>this.globalStore.isLoggedIn$.pipe((0,A.U)(s=>({logged:s,item:a})))),(0,I.b)(({logged:a})=>!a&&this.router.navigate(["/login"],{queryParams:{from:"harvest"}})),(0,b.h)(Boolean),(0,A.U)(({item:a})=>({item:a,itemBefore:this.get().originalData.find(s=>s.id===a.id)})),(0,I.b)(a=>this.update(a.item)),(0,se.b)(a=>this.harvestDataService.update({...a.item,harvestId:this.get().harvestId}).pipe((0,re.K)(()=>(this.update(a.itemBefore),this.toast.error("Algo ha ido mal..."),pe.E)))))),this.setData=this.updater((i,{harvest:a,harvestId:s})=>{const r=this.translate.getActiveLang(),l=a.map(M=>({...M,name:M[r].name,subzone:M[r].subzone})),{dataSet:c,page:h,next:m,previous:y}=this.dhMygoliaDataset.getDataSet(l,i.filters);return{...i,harvest:c,page:h,next:m,previous:y,harvestId:s,originalData:l,statistics:this.calculateStatistics(l)}}),this.updateTranslation=this.updater((i,a)=>{const s=r=>({...r,name:r[a].name,subzone:r[a].subzone});return{...i,harvest:i.harvest.map(s),originalData:i.originalData.map(s)}}),this.search=this.updater((i,a)=>{const s={...i.filters,search:a},{dataSet:r,page:l,next:c,previous:h}=this.dhMygoliaDataset.getDataSet(i.originalData,s);return{...i,filters:s,harvest:r,page:l,next:c,previous:h}}),this.filter=this.updater((i,a)=>{const s={...i.filters,...a},{dataSet:r,page:l,next:c,previous:h}=this.dhMygoliaDataset.getDataSet(i.originalData,s);return{...i,filters:s,harvest:r,page:l,next:c,previous:h}}),this.steps=this.updater((i,a)=>{const s={...i.filters,steps:Object.values(a)},{dataSet:r,page:l,next:c,previous:h}=this.dhMygoliaDataset.getDataSet(i.originalData,s);return{...i,filters:s,harvest:r,page:l,next:c,previous:h}}),this.update=this.updater((i,a)=>{const s=c=>c.id===a.id?{...c,...a}:c,r=i.originalData.map(s),l=i.harvest.map(s);return{...i,originalData:r,statistics:this.calculateStatistics(r),harvest:l}}),this.handleInfiniteScroll=this.updater(i=>{if(!i.next)return i;const{dataSet:a,page:s,next:r,previous:l}=this.dhMygoliaDataset.getDataSet(i.originalData,i.filters,i.next);return{...i,harvest:i.harvest.concat(a),page:s,next:r,previous:l}}),this.dhMygoliaDataset=new de({maxResults:12,validators:this.harvestFilter.harvestFilter.validators}),this.translate.langChanges$.pipe((0,ae.sL)()).subscribe(i=>{this.updateTranslation(i)})}calculateStatistics(e){return this.chartData.map(({amount:i,colors:[a,s],label:r,callback:l})=>{const c=e.filter(l).length,h=he.calculatePercentage(c,i);return[{id:1,amount:i,current:c,label:r,percent:h,color:a},{id:2,color:s,percent:100-h}]})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(vt))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();const _e={showCaptured:!0,showRepeatedOnly:!1,monsters:!0,bosses:!0,archis:!0};function ve(o,n){1&o&&t._UZ(0,"app-chart",4),2&o&&t.Q6J("data",n.$implicit)}function be(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).ngIf,s=t.oxw();return t.KtG(s.onShareHarvest(a.harvestId))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e("home.share"))}}function Ce(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onBack())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e("home.back"))}}function ye(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).ngIf,s=t.oxw();return t.KtG(s.onStepCompleted(a.steps))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e("home.complete"))}}function De(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",5)(1,"div",6),t._UZ(2,"app-input",7),t.TgZ(3,"app-button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onClearFilters())}),t._uU(4),t.qZA(),t.YNc(5,be,2,1,"app-button",9),t.YNc(6,Ce,2,1,"ng-template",null,10,t.W1O),t.YNc(8,ye,2,1,"app-button",11),t.qZA(),t.TgZ(9,"div",12)(10,"div",13),t._UZ(11,"input",14),t.TgZ(12,"label",15),t._uU(13),t.qZA()(),t.TgZ(14,"div",13),t._UZ(15,"input",16),t.TgZ(16,"label",17),t._uU(17),t.qZA()(),t.TgZ(18,"div",13),t._UZ(19,"input",18),t.TgZ(20,"label",19),t._uU(21),t.qZA()(),t.TgZ(22,"div",13),t._UZ(23,"input",20),t.TgZ(24,"label",21),t._uU(25),t.qZA()(),t.TgZ(26,"div",13),t._UZ(27,"input",22),t.TgZ(28,"label",23),t._uU(29),t.qZA()()()()}if(2&o){const e=n.$implicit,i=t.MAs(7),a=t.oxw(2);t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("control",a.search)("placeholder",e("home.search")),t.xp6(2),t.Oqu(e("home.reset")),t.xp6(1),t.Q6J("ngIf",!a.isShared)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",!a.isShared),t.xp6(5),t.Oqu(e("home.captured")),t.xp6(4),t.Oqu(e("home.repeated")),t.xp6(4),t.Oqu(e("home.monsters")),t.xp6(4),t.Oqu(e("home.bosses")),t.xp6(4),t.Oqu(e("home.archis"))}}function xe(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,ve,1,1,"app-chart",2),t.qZA(),t.YNc(3,De,30,12,"form",3),t.BQk()),2&o){const e=n.ngIf;t.xp6(2),t.Q6J("ngForOf",e.statistics)}}const bt=new t.OlP("HARVEST_FILTERS_VM");let Te=(()=>{class o{constructor(){this.search=new u.NI(""),this.changed=this.search.valueChanges.pipe((0,qt.b)(400),(0,A.U)(String)),this.toast=(0,t.f3M)(gt.jE),this.router=(0,t.f3M)(S.F0),this.formBuilder=(0,t.f3M)(u.qu),this.harvestStore=(0,t.f3M)(x),this.vm$=(0,t.f3M)(bt),this.matDialog=(0,t.f3M)(E),this.translate=(0,t.f3M)(C.Vn),this.isShared=(0,t.f3M)(S.gz).snapshot.params.id,this.form=this.formBuilder.nonNullable.group({showCaptured:[!0],showRepeatedOnly:[!1],monsters:[!0],bosses:[!0],archis:[!0]})}ngOnInit(){this.harvestStore.filter(this.form.valueChanges)}onClearFilters(){this.form.setValue(_e),this.search.setValue("")}onBack(){this.router.navigate(["/",this.translate.getActiveLang()])}onShareHarvest(e){(0,Qt.D)(navigator.clipboard.writeText(`${ut.N.baseUrl}/${this.translate.getActiveLang()}/share/${e}`)).pipe(this.toast.observe({loading:"Copiando url en el portapapeles",success:"Enlace copiado en el portapapeles",error:"Algo ha ido mal, intentalo m\xe1s tarde"})).subscribe()}onStepCompleted(e){this.harvestStore.completeSteps(this.matDialog.open(Y,{data:e,panelClass:"background"}).afterClosed().pipe((0,b.h)(Boolean)))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-harvest-filters"]],outputs:{changed:"changed"},standalone:!0,features:[t._Bn([{provide:bt,useFactory:()=>{const n=(0,t.f3M)(x);return(0,Kt.a)([n.statistics$,n.harvestId$,n.steps$]).pipe((0,A.U)(([e,i,a])=>({statistics:e,harvestId:i,steps:a})))}}]),t.jDz],decls:2,vars:3,consts:[[4,"ngIf"],[1,"chart-container"],[3,"data",4,"ngFor","ngForOf"],[3,"formGroup",4,"transloco"],[3,"data"],[3,"formGroup"],[1,"search-box"],["type","text",2,"flex-basis","500px",3,"control","placeholder"],[3,"click"],[3,"click",4,"ngIf","ngIfElse"],["back",""],[3,"click",4,"ngIf"],[1,"controls-box"],[1,"control"],["type","checkbox","formControlName","showCaptured","id","completed"],["for","completed"],["type","checkbox","formControlName","showRepeatedOnly","id","repeated"],["for","repeated"],["type","checkbox","formControlName","monsters","id","monsters"],["for","monsters"],["type","checkbox","formControlName","bosses","id","bosses"],["for","bosses"],["type","checkbox","formControlName","archis","id","archis"],["for","archis"]],template:function(e,i){1&e&&(t.YNc(0,xe,4,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[p.ez,p.sg,p.O5,p.Ov,u.UX,u._Y,u.Wl,u.JJ,u.JL,u.sg,u.u,ie,ne.a,B.r,C.y4,C.KI],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:3rem;max-width:900px;margin:2rem auto 0}[_nghost-%COMP%]   .search-box[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-bottom:1rem}[_nghost-%COMP%]   .controls-box[_ngcontent-%COMP%]{padding:.5rem 0;display:flex;justify-content:center;gap:2rem}[_nghost-%COMP%]   .controls-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{padding:.3rem .7rem;border-radius:.3rem;border:none;box-shadow:0 0 0 1px gray;font-size:1.5rem;outline:none;width:500px;margin:0 auto}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px gray}"]}),o})();var Se=d(4968),Ae=d(5577),Me=d(4986),we=d(4482),Ct=d(5403),Oe=d(8421);const yt={leading:!0,trailing:!1};var Ee=d(5963);function Pe(o,n,e,i){const a=window&&!!window.document&&window.document.documentElement;let s=a&&n?window:e;if(o&&(s=o&&a&&"string"==typeof o?function ke(o,n,e){return(e?window.document:n).querySelector(o)}(o,e.nativeElement,i):o,!s))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return s}function $(o){return o&&!o.firstChange}const He={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},Le={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class Ze{constructor(n=!0){this.vertical=n,this.propsMap=n?He:Le}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function Ue(o){return["Window","global"].some(e=>Object.prototype.toString.call(o).includes(e))}function j(o,n){return o?n.document.documentElement:null}function Dt(o,n){const e=function je({container:o,isWindow:n,axis:e}){const{offsetHeightKey:i,clientHeightKey:a}=xt(e);return Tt(o,n,i,a)}(n);return n.isWindow?function ze(o,n,e){const{axis:i,container:a,isWindow:s}=e,{offsetHeightKey:r,clientHeightKey:l}=xt(i),c=o+St(j(s,a),i,s),h=Tt(n.nativeElement,s,r,l),m=function Ve(o,n,e){const i=n.topKey();if(o.getBoundingClientRect)return o.getBoundingClientRect()[i]+St(o,n,e)}(n.nativeElement,i,s)+h;return{height:o,scrolled:c,totalToScroll:m,isWindow:s}}(e,o,n):function $e(o,n,e){const{axis:i,container:a}=e;return{height:o,scrolled:a[i.scrollTopKey()],totalToScroll:a[i.scrollHeightKey()],isWindow:!1}}(e,0,n)}function xt(o){return{offsetHeightKey:o.offsetHeightKey(),clientHeightKey:o.clientHeightKey()}}function Tt(o,n,e,i){if(isNaN(o[e])){const a=j(n,o);return a?a[i]:0}return o[e]}function St(o,n,e){const i=n.pageYOffsetKey(),a=n.scrollTopKey(),s=n.offsetTopKey();return isNaN(window.pageYOffset)?j(e,o)[a]:o.ownerDocument?o.ownerDocument.defaultView[i]:o[s]}function Je(o,n={down:0,up:0},e){let i,a;if(o.totalToScroll<=0)return!1;const s=o.isWindow?o.scrolled:o.height+o.scrolled;return e?(i=(o.totalToScroll-s)/o.totalToScroll,a=(n?.down?n.down:0)/10):(i=o.scrolled/(o.scrolled+(o.totalToScroll-s)),a=(n?.up?n.up:0)/10),i<=a}class Ke{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,e){this.updateScrollPosition(n),this.updateTotalToScroll(e)}updateTriggeredFlag(n,e){e?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,e){return e?this.triggered.down===n:this.triggered.up===n}}function Xe(o){const{scrollContainer:n,scrollWindow:e,element:i,fromRoot:a}=o,s=function Ne({windowElement:o,axis:n}){return function Ye(o,n){const e=o.isWindow||n&&!n.nativeElement?n:n.nativeElement;return{...o,container:e}}({axis:n,isWindow:Ue(o)},o)}({axis:new Ze(!o.horizontal),windowElement:Pe(n,e,i,a)}),r=new Ke({totalToScroll:Dt(i,s)}),c={up:o.upDistance,down:o.downDistance};return function to(o){let n=(0,Se.R)(o.container,"scroll");return o.throttle&&(n=n.pipe(function Ie(o,n=Me.z,e=yt){const i=(0,Ee.H)(o,n);return function Fe(o,n=yt){return(0,we.e)((e,i)=>{const{leading:a,trailing:s}=n;let r=!1,l=null,c=null,h=!1;const m=()=>{c?.unsubscribe(),c=null,s&&(wt(),h&&i.complete())},y=()=>{c=null,h&&i.complete()},M=T=>c=(0,Oe.Xf)(o(T)).subscribe((0,Ct.x)(i,m,y)),wt=()=>{if(r){r=!1;const T=l;l=null,i.next(T),!h&&M(T)}};e.subscribe((0,Ct.x)(i,T=>{r=!0,l=T,(!c||c.closed)&&(a?wt():M(T))},()=>{h=!0,(!(s&&r&&c)||c.closed)&&i.complete()}))})}(()=>i,e)}(o.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:s.container,throttle:o.throttle}).pipe((0,Ae.z)(()=>(0,W.of)(Dt(i,s))),(0,A.U)(h=>function eo(o,n,e){const{scrollDown:i,fire:a}=function We(o,n,e){const i=function Ge(o,n){return o<n.scrolled}(o,n);return{fire:Je(n,e,i),scrollDown:i}}(o,n,e);return{scrollDown:i,fire:a,stats:n}}(r.lastScrollPosition,h,c)),(0,I.b)(({stats:h})=>r.updateScroll(h.scrolled,h.totalToScroll)),(0,b.h)(({fire:h,scrollDown:m,stats:{totalToScroll:y}})=>function Be(o,n,e){return!!(o&&n||!e&&n)}(o.alwaysCallback,h,r.isTriggeredScroll(y,m))),(0,I.b)(({scrollDown:h,stats:{totalToScroll:m}})=>{r.updateTriggeredFlag(m,h)}),(0,A.U)(oo))}const V={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function oo(o){const{scrollDown:n,stats:{scrolled:e}}=o;return{type:n?V.DOWN:V.UP,payload:{currentScrollPosition:e}}}let io=(()=>{class o{constructor(e,i){this.element=e,this.zone=i,this.scrolled=new t.vpe,this.scrolledUp=new t.vpe,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:e,infiniteScrollDisabled:i,infiniteScrollDistance:a}){const s=$(e),r=$(i),l=$(a),c=!r&&!this.infiniteScrollDisabled||r&&!i.currentValue||l;(s||r||l)&&(this.destroyScroller(),c&&this.setup())}setup(){(function Re(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=Xe({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(e=>this.handleOnScroll(e))})}handleOnScroll({type:e,payload:i}){const a=e===V.DOWN?this.scrolled:this.scrolledUp;(function no(o){return o.observed??o.observers.length>0})(a)&&this.zone.run(()=>a.emit(i))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(t.R0b))},o.\u0275dir=t.lG2({type:o,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[t.TTD]}),o})(),ao=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})();const At=function(o){return{"pointer-events":o}};let so=(()=>{class o{constructor(){this.harvestStore=(0,t.f3M)(x),this.editable=(0,t.f3M)(P)}onCapturedChange({id:e,captured:i,amount:a=0}){this.harvestStore.updateData({id:e,captured:!i,amount:a})}onAmountChange({id:e,captured:i},a){this.harvestStore.updateData({id:e,captured:!!i,amount:a})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-harvest-item"]],inputs:{item:"item"},standalone:!0,features:[t.jDz],decls:25,vars:19,consts:[["width","120","height","112","priority","",3,"ngSrc","alt"],[1,"cell"],[1,"cell","center"],[1,"cell","center","pointer","not-selectable",3,"ngClass","ngStyle","click"],[1,"material-symbols-outlined"],[1,"cell","center","not-selectable",3,"ngStyle"],[3,"disabled","click"]],template:function(e,i){if(1&e&&(t._UZ(0,"img",0),t.TgZ(1,"div",1)(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"div",2)(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div",1)(8,"small"),t._uU(9),t.qZA()(),t.TgZ(10,"div",2)(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"div",3),t.NdJ("click",function(){return i.onCapturedChange(i.item)}),t.TgZ(14,"span",4),t._uU(15),t.qZA()(),t.TgZ(16,"div",5)(17,"button",6),t.NdJ("click",function(){return i.onAmountChange(i.item,i.item.amount?i.item.amount+1:1)}),t.TgZ(18,"span",4),t._uU(19," arrow_drop_up "),t.qZA()(),t.TgZ(20,"p"),t._uU(21),t.qZA(),t.TgZ(22,"button",6),t.NdJ("click",function(){return i.onAmountChange(i.item,i.item.amount-1)}),t.TgZ(23,"span",4),t._uU(24," arrow_drop_down "),t.qZA()()()),2&e){let a;t.Q6J("ngSrc",i.item.image)("alt",i.item.name),t.xp6(3),t.Oqu(i.item.name),t.xp6(3),t.Oqu(i.item.level),t.xp6(3),t.Oqu(i.item.subzone),t.xp6(3),t.Oqu(i.item.step),t.xp6(1),t.Q6J("ngClass",i.item.captured?"green":"red")("ngStyle",t.VKq(15,At,!i.editable&&"none")),t.xp6(2),t.hij(" ",i.item.captured?"check":"close"," "),t.xp6(1),t.ekj("warn",!!i.item.amount),t.Q6J("ngStyle",t.VKq(17,At,!i.editable&&"none")),t.xp6(1),t.Q6J("disabled",!i.editable),t.xp6(4),t.Oqu(null!==(a=i.item.amount)&&void 0!==a?a:"0"),t.xp6(1),t.Q6J("disabled",!i.item.amount||!i.editable)}},dependencies:[p.ez,p.mk,p.PC,p.Zd],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:.6fr .7fr .6fr 1fr repeat(3,.6fr)}[_nghost-%COMP%]   .pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .green[_ngcontent-%COMP%]{color:#fff;background-color:#98c379}[_nghost-%COMP%]   .red[_ngcontent-%COMP%]{color:#fff;background-color:#e06c75}[_nghost-%COMP%]   .warn[_ngcontent-%COMP%]{background-color:#e4b33e}[_nghost-%COMP%]:nth-child(odd){background-color:#0001}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{padding:.8rem;height:7rem;margin:auto}[_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{display:grid;align-items:center}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center;place-content:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;color:transparent;height:1.5rem;width:1.5rem;border-radius:50%;border:none;margin:.5rem 0;transition:box-shadow ease .2s}[_nghost-%COMP%]:hover   button[disabled][_ngcontent-%COMP%]{color:transparent}[_nghost-%COMP%]:hover   button[_ngcontent-%COMP%]:not([disabled]){color:#fff}[_nghost-%COMP%]:hover   button[_ngcontent-%COMP%]:not([disabled]):hover{box-shadow:0 0 0 1px #a8dadc}[_nghost-%COMP%]:hover   button[_ngcontent-%COMP%]:not([disabled]):active{box-shadow:0 0 0 1px #457b9d}[_nghost-%COMP%]   .not-selectable[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"],changeDetection:0}),o})();const ro=[{label:"",type:"space"},{label:"home.table.name",type:"text"},{label:"home.table.level",type:"text"},{label:"home.table.subzone",type:"text"},{label:"home.table.step",type:"filter",component:Y},{label:"home.table.captured",type:"text"},{label:"home.table.repeated",type:"text"}];function lo(o,n){1&o&&t._UZ(0,"div")}function co(o,n){if(1&o&&(t.TgZ(0,"app-button",9),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw().$implicit;t.Q6J("disabled",!0)("center",!0),t.xp6(1),t.Oqu(e(i.label))}}function ho(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw().ngIf,r=t.oxw();return t.KtG(r.openFilter(a.component,s))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw().$implicit,a=t.oxw().ngIf;t.Q6J("accent",a.includes(!1))("center",!0),t.xp6(1),t.hij(" ",e(i.label)," ")}}function po(o,n){if(1&o&&(t.ynx(0,5),t.YNc(1,lo,1,0,"div",6),t.YNc(2,co,2,3,"app-button",7),t.YNc(3,ho,2,3,"app-button",8),t.BQk()),2&o){const e=t.oxw().$implicit;t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","space"),t.xp6(1),t.Q6J("ngSwitchCase","text"),t.xp6(1),t.Q6J("ngSwitchCase","filter")}}function go(o,n){1&o&&(t.TgZ(0,"div",3),t.YNc(1,po,4,4,"ng-container",4),t.qZA())}function uo(o,n){if(1&o&&(t.TgZ(0,"div",1),t.YNc(1,go,2,0,"div",2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.headers)}}let mo=(()=>{class o{constructor(){this.headers=ro,this.matDialog=(0,t.f3M)(E),this.harvestStore=(0,t.f3M)(x),this.steps$=this.harvestStore.steps$}openFilter(e,i){this.matDialog.open(e,{data:i,panelClass:"background"}).afterClosed().pipe((0,b.h)(Boolean)).subscribe(a=>this.harvestStore.steps(a))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-harvest-table-header"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[["class","header-container",4,"ngIf"],[1,"header-container"],["class","table-header",4,"ngFor","ngForOf"],[1,"table-header"],[3,"ngSwitch",4,"transloco"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"disabled","center",4,"ngSwitchCase"],["icon","expand_more",3,"accent","center","click",4,"ngSwitchCase"],[3,"disabled","center"],["icon","expand_more",3,"accent","center","click"]],template:function(e,i){1&e&&(t.YNc(0,uo,2,1,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.steps$))},dependencies:[p.ez,p.sg,p.O5,p.RF,p.n9,p.Ov,B.r,C.y4,C.KI],styles:[".header-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:.6fr .7fr .6fr 1fr repeat(3,.6fr);text-align:center;padding:1rem 0}"]}),o})();function fo(o,n){1&o&&t._UZ(0,"app-harvest-item",3),2&o&&t.Q6J("item",n.$implicit)}function _o(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.NdJ("scrolled",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.scrolled.emit())}),t.YNc(2,fo,1,1,"app-harvest-item",2),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("infiniteScrollDistance",3)("infiniteScrollThrottle",400),t.xp6(1),t.Q6J("ngForOf",e.data)("ngForTrackBy",e.trackByFn)}}let vo=(()=>{class o{constructor(){this.scrolled=new t.vpe,this.matDialog=(0,t.f3M)(E)}openFilter(){this.matDialog.open(Y,{panelClass:"background"})}trackByFn(e,i){return i.id}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-harvest-table"]],inputs:{data:"data"},outputs:{scrolled:"scrolled"},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[[4,"ngIf"],["infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[3,"item",4,"ngFor","ngForOf","ngForTrackBy"],[3,"item"]],template:function(e,i){1&e&&(t._UZ(0,"app-harvest-table-header"),t.YNc(1,_o,3,4,"ng-container",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",null==i.data?null:i.data.length))},dependencies:[p.O5,p.sg,dt,so,ao,io,mo],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),o})();const Mt=new t.OlP("HARVEST_DATA"),P=new t.OlP("EDITABLE");let bo=(()=>{class o{constructor(){this.data$=(0,t.f3M)(Mt),this.editable=(0,t.f3M)(P),this.route=(0,t.f3M)(S.gz),this.globalStore=(0,t.f3M)(pt.o),this.harvestStore=(0,t.f3M)(x)}ngOnInit(){this.harvestStore.getData(this.route.snapshot.params.id)}onSearchChange(e){this.harvestStore.search(e)}onLogout(){this.globalStore.logout(),this.harvestStore.getData(this.route.snapshot.params.id)}handleInfiniteScroll(){this.harvestStore.handleInfiniteScroll()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-havest"]],standalone:!0,features:[t._Bn([me,ge,vt,x,{provide:Mt,useFactory:()=>(0,t.f3M)(x).harvest$},{provide:P,useFactory:()=>!(0,t.f3M)(S.gz).snapshot.params.id}]),t.jDz],decls:4,vars:3,consts:[[3,"logout"],[3,"changed"],[3,"data","scrolled"]],template:function(e,i){1&e&&(t.TgZ(0,"app-header",0),t.NdJ("logout",function(){return i.onLogout()}),t.qZA(),t.TgZ(1,"app-harvest-filters",1),t.NdJ("changed",function(s){return i.onSearchChange(s)}),t.qZA(),t.TgZ(2,"app-harvest-table",2),t.NdJ("scrolled",function(){return i.handleInfiniteScroll()}),t.ALo(3,"async"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("data",t.lcZ(3,1,i.data$)))},dependencies:[p.ez,p.Ov,S.Bz,dt,Gt.G,vo,Te],styles:["[_nghost-%COMP%]{display:block;margin:auto}"]}),o})()}}]);