"use strict";(self.webpackChunkdofus_cosecha=self.webpackChunkdofus_cosecha||[]).push([[54],{54:(L,l,s)=>{s.r(l),s.d(l,{ExchangeComponent:()=>F});var u=s(4755),n=s(2223),x=s(5855),p=s(2480),c=s(430),g=s(483),f=s(5266),v=s(1864),_=s(188);const C=function(e){return["/es","share",e]};function Z(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"small"),n._uU(4),n.qZA(),n.TgZ(5,"h3"),n._uU(6),n.qZA()(),n.TgZ(7,"app-button",4),n.NdJ("click",function(o){n.CHM(t);const i=n.oxw();return o.stopPropagation(),n.KtG(i.copyToClipboard())}),n.TgZ(8,"span",5),n._uU(9," content_copy "),n.qZA()()(),n.TgZ(10,"div",2)(11,"div",3)(12,"small"),n._uU(13,"Discord ID"),n.qZA(),n.TgZ(14,"h3"),n._uU(15),n.qZA()()(),n.TgZ(16,"div",6)(17,"div",7)(18,"div",3)(19,"small"),n._uU(20,"Monsters"),n.qZA()(),n.TgZ(21,"h3"),n._uU(22),n.qZA()(),n.TgZ(23,"div",8)(24,"div",3)(25,"small"),n._uU(26,"Bosses"),n.qZA()(),n.TgZ(27,"h3"),n._uU(28),n.qZA()(),n.TgZ(29,"div",9)(30,"div",3)(31,"small"),n._uU(32,"Archis"),n.qZA()(),n.TgZ(33,"h3"),n._uU(34),n.qZA()()()()}if(2&e){const t=a.$implicit,r=n.oxw();n.Q6J("routerLink",n.VKq(7,C,r.user.userHarvestId)),n.xp6(4),n.Oqu(t("exchange.name")),n.xp6(2),n.Oqu(r.user.nickname),n.xp6(9),n.Oqu(r.user.discord||""),n.xp6(7),n.Oqu(r.user.harvest[0].length),n.xp6(6),n.Oqu(r.user.harvest[1].length),n.xp6(6),n.Oqu(r.user.harvest[2].length)}}let T=(()=>{class e{constructor(){this.toast=(0,n.f3M)(v.jE)}copyToClipboard(){(0,_.D)(navigator.clipboard.writeText(`/w ${this.user.nickname} `)).pipe(this.toast.observe({loading:"Copiando url en el portapapeles",success:"Comando copiado en el portapapeles",error:"Algo ha ido mal, intentalo m\xe1s tarde"})).subscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-exchange-card"]],inputs:{user:"user"},standalone:!0,features:[n.jDz],decls:1,vars:0,consts:[["class","card",3,"routerLink",4,"transloco"],[1,"card",3,"routerLink"],[1,"cell"],[1,"title"],[3,"click"],[1,"material-symbols-outlined"],[1,"harvest-info"],[1,"cell","amount","purple"],[1,"cell","amount","blue"],[1,"cell","amount","yellow"]],template:function(t,r){1&t&&n.YNc(0,Z,35,9,"div",0)},dependencies:[p.rH,g.r,c.y4,c.KI],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #50555e;border-radius:.4rem;padding:1rem 1rem 0;margin:0 0 1rem;cursor:pointer;transition:box-shadow .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 2px #50555e}.harvest-info[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem 0}.amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.5rem;border-radius:.4rem;width:10rem}.amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}.purple[_ngcontent-%COMP%]{background-color:#6a1b9a66}.blue[_ngcontent-%COMP%]{background-color:#457b9d66}.yellow[_ngcontent-%COMP%]{background-color:#ccb00066}.cell[_ngcontent-%COMP%]{padding-bottom:1rem;display:flex;justify-content:space-between;align-items:center}app-button[_ngcontent-%COMP%]{justify-self:end}"]}),e})();var d=s(3144),m=s(4168),U=s(3900),O=s(2340);let E=(()=>{class e{constructor(){this.URL=O.N.apiUrl,this.http=(0,n.f3M)(d.eN)}get(){return this.http.get(`${this.URL}/exchange`)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const y={users:[],error:!1};let h=(()=>{class e extends m.m1{constructor(t){super(y),this.service=t,this.vm$=this.select(r=>r),this.getUsers=this.effect(r=>r.pipe((0,U.w)(()=>this.service.get().pipe((0,m._b)(o=>this.addUsers(o),o=>{o instanceof d.UA&&400===o.status&&this.setError(!0)}))))),this.addUsers=this.updater((r,o)=>({...r,users:o})),this.setError=this.updater((r,o)=>({...r,error:o}))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(E))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();const A=function(e){return{server:e}};function M(e,a){if(1&e&&(n.TgZ(0,"h1"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2).$implicit,r=n.oxw();let o,i;n.xp6(1),n.hij(" ",t("exchange.title",n.VKq(1,A,null==(o=r.vm())||null==o.users||null==(i=o.users.at(0))?null:i.server))," ")}}function b(e,a){1&e&&n._UZ(0,"app-user-exchange-card",6),2&e&&n.Q6J("user",a.$implicit)}function P(e,a){if(1&e&&(n.ynx(0),n.YNc(1,M,2,3,"h1",3),n.TgZ(2,"div",4),n.YNc(3,b,1,1,"app-user-exchange-card",5),n.qZA(),n.BQk()),2&e){const t=n.oxw(2);let r,o;n.xp6(1),n.Q6J("ngIf",null==(r=t.vm())||null==r.users?null:r.users.length),n.xp6(2),n.Q6J("ngForOf",null==(o=t.vm())?null:o.users)}}const q=function(e){return["/",e,"profile"]};function w(e,a){if(1&e&&(n.TgZ(0,"div",7)(1,"h1"),n._uU(2),n.qZA(),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.TgZ(5,"div",8)(6,"app-button",9),n._uU(7),n.qZA(),n.TgZ(8,"app-button"),n._uU(9),n.qZA()()()),2&e){const t=n.oxw().$implicit,r=n.oxw();n.xp6(2),n.Oqu(t("exchange.error.title")),n.xp6(2),n.Oqu(t("exchange.error.message")),n.xp6(2),n.Q6J("routerLink",n.VKq(5,q,r.translate.getActiveLang())),n.xp6(1),n.Oqu(t("exchange.error.button")),n.xp6(2),n.Oqu(t("exchange.error.back"))}}function I(e,a){if(1&e&&(n.ynx(0),n._UZ(1,"app-header"),n.YNc(2,P,4,2,"ng-container",1),n.YNc(3,w,10,7,"ng-template",null,2,n.W1O),n.BQk()),2&e){const t=n.MAs(4),r=n.oxw();let o;n.xp6(2),n.Q6J("ngIf",!(null!=(o=r.vm())&&o.error))("ngIfElse",t)}}let F=(()=>{class e{constructor(){this.store=(0,n.f3M)(h),this.translate=(0,n.f3M)(c.Vn),this.vm=(0,x.O4)(this.store.vm$)}ngOnInit(){this.store.getUsers()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-exchange"]],standalone:!0,features:[n._Bn([h]),n.jDz],decls:1,vars:0,consts:[[4,"transloco"],[4,"ngIf","ngIfElse"],["error",""],[4,"ngIf"],[1,"card-container"],[3,"user",4,"ngFor","ngForOf"],[3,"user"],[1,"error"],[1,"actions"],[3,"routerLink"]],template:function(t,r){1&t&&n.YNc(0,I,5,2,"ng-container",0)},dependencies:[u.O5,u.sg,p.rH,f.G,c.y4,c.KI,g.r,T],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}h1[_ngcontent-%COMP%]{padding:0 0 2rem}.card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-gap:1rem}.error[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #50555e;border-radius:.4rem;padding:1.5rem 1rem .5rem;margin:2rem 0}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:1rem;padding:1.5rem 0 .5rem}"]}),e})()}}]);