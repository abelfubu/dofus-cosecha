"use strict";(self.webpackChunkdofus_cosecha=self.webpackChunkdofus_cosecha||[]).push([[54],{54:(Q,u,a)=>{a.r(u),a.d(u,{ExchangeComponent:()=>F});var p=a(4755),e=a(2223),f=a(5855),g=a(2480),c=a(430),d=a(483),v=a(5266),_=a(1864),C=a(188);const l=function(n){return["/es","share",n]},Z=function(){return{selection:"monsters"}},y=function(){return{selection:"bosses"}},T=function(){return{selection:"archis"}};function U(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"small"),e._uU(4),e.qZA(),e.TgZ(5,"h3"),e._uU(6),e.qZA()(),e.TgZ(7,"app-button",4),e.NdJ("click",function(o){e.CHM(t);const i=e.oxw();return o.stopPropagation(),e.KtG(i.copyToClipboard())}),e.TgZ(8,"span",5),e._uU(9," content_copy "),e.qZA()()(),e.TgZ(10,"div",2)(11,"div",3)(12,"small"),e._uU(13,"Discord ID"),e.qZA(),e.TgZ(14,"h3"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",6)(17,"div",7)(18,"div",3)(19,"small"),e._uU(20,"Monsters"),e.qZA()(),e.TgZ(21,"h3"),e._uU(22),e.qZA()(),e.TgZ(23,"div",8)(24,"div",3)(25,"small"),e._uU(26,"Bosses"),e.qZA()(),e.TgZ(27,"h3"),e._uU(28),e.qZA()(),e.TgZ(29,"div",9)(30,"div",3)(31,"small"),e._uU(32,"Archis"),e.qZA()(),e.TgZ(33,"h3"),e._uU(34),e.qZA()()()()}if(2&n){const t=s.$implicit,r=e.oxw();e.xp6(4),e.Oqu(t("exchange.name")),e.xp6(2),e.Oqu(r.user.nickname),e.xp6(9),e.Oqu(r.user.discord||""),e.xp6(2),e.Q6J("routerLink",e.VKq(12,l,r.user.userHarvestId))("queryParams",e.DdM(14,Z)),e.xp6(5),e.Oqu(r.user.harvest[0].length),e.xp6(1),e.Q6J("routerLink",e.VKq(15,l,r.user.userHarvestId))("queryParams",e.DdM(17,y)),e.xp6(5),e.Oqu(r.user.harvest[1].length),e.xp6(1),e.Q6J("routerLink",e.VKq(18,l,r.user.userHarvestId))("queryParams",e.DdM(20,T)),e.xp6(5),e.Oqu(r.user.harvest[2].length)}}let O=(()=>{class n{constructor(){this.toast=(0,e.f3M)(_.jE)}copyToClipboard(){(0,C.D)(navigator.clipboard.writeText(`/w ${this.user.nickname} `)).pipe(this.toast.observe({loading:"Copiando url en el portapapeles",success:"Comando copiado en el portapapeles",error:"Algo ha ido mal, intentalo m\xe1s tarde"})).subscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-exchange-card"]],inputs:{user:"user"},standalone:!0,features:[e.jDz],decls:1,vars:0,consts:[["class","card",4,"transloco"],[1,"card"],[1,"cell"],[1,"title"],[3,"click"],[1,"material-symbols-outlined"],[1,"harvest-info"],[1,"cell","amount","purple",3,"routerLink","queryParams"],[1,"cell","amount","blue",3,"routerLink","queryParams"],[1,"cell","amount","yellow",3,"routerLink","queryParams"]],template:function(t,r){1&t&&e.YNc(0,U,35,21,"div",0)},dependencies:[g.rH,d.r,c.y4,c.KI],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #50555e;border-radius:.4rem;padding:1rem 1rem 0;margin:0 0 1rem;transition:box-shadow .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 2px #50555e}.harvest-info[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem 0}.amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.5rem;border-radius:.4rem;width:10rem;cursor:pointer}.amount[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}.purple[_ngcontent-%COMP%]{background-color:#6a1b9a66}.blue[_ngcontent-%COMP%]{background-color:#457b9d66}.yellow[_ngcontent-%COMP%]{background-color:#ccb00066}.cell[_ngcontent-%COMP%]{padding-bottom:1rem;display:flex;justify-content:space-between;align-items:center}app-button[_ngcontent-%COMP%]{justify-self:end}"]}),n})();var m=a(3144),h=a(4168),E=a(3900),M=a(2340);let q=(()=>{class n{constructor(){this.URL=M.N.apiUrl,this.http=(0,e.f3M)(m.eN)}get(){return this.http.get(`${this.URL}/exchange`)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A={users:[],error:!1};let x=(()=>{class n extends h.m1{constructor(t){super(A),this.service=t,this.vm$=this.select(r=>r),this.getUsers=this.effect(r=>r.pipe((0,E.w)(()=>this.service.get().pipe((0,h._b)(o=>this.addUsers(o),o=>{o instanceof m.UA&&400===o.status&&this.setError(!0)}))))),this.addUsers=this.updater((r,o)=>({...r,users:o})),this.setError=this.updater((r,o)=>({...r,error:o}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(q))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const b=function(n){return{server:n}};function P(n,s){if(1&n&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit,r=e.oxw();let o,i;e.xp6(1),e.hij(" ",t("exchange.title",e.VKq(1,b,null==(o=r.vm())||null==o.users||null==(i=o.users.at(0))?null:i.server))," ")}}function I(n,s){1&n&&e._UZ(0,"app-user-exchange-card",6),2&n&&e.Q6J("user",s.$implicit)}function L(n,s){if(1&n&&(e.ynx(0),e.YNc(1,P,2,3,"h1",3),e.TgZ(2,"div",4),e.YNc(3,I,1,1,"app-user-exchange-card",5),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);let r,o;e.xp6(1),e.Q6J("ngIf",null==(r=t.vm())||null==r.users?null:r.users.length),e.xp6(2),e.Q6J("ngForOf",null==(o=t.vm())?null:o.users)}}const k=function(n){return["/",n,"profile"]};function w(n,s){if(1&n&&(e.TgZ(0,"div",7)(1,"h1"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"div",8)(6,"app-button",9),e._uU(7),e.qZA(),e.TgZ(8,"app-button"),e._uU(9),e.qZA()()()),2&n){const t=e.oxw().$implicit,r=e.oxw();e.xp6(2),e.Oqu(t("exchange.error.title")),e.xp6(2),e.Oqu(t("exchange.error.message")),e.xp6(2),e.Q6J("routerLink",e.VKq(5,k,r.translate.getActiveLang())),e.xp6(1),e.Oqu(t("exchange.error.button")),e.xp6(2),e.Oqu(t("exchange.error.back"))}}function D(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"app-header"),e.YNc(2,L,4,2,"ng-container",1),e.YNc(3,w,10,7,"ng-template",null,2,e.W1O),e.BQk()),2&n){const t=e.MAs(4),r=e.oxw();let o;e.xp6(2),e.Q6J("ngIf",!(null!=(o=r.vm())&&o.error))("ngIfElse",t)}}let F=(()=>{class n{constructor(){this.store=(0,e.f3M)(x),this.translate=(0,e.f3M)(c.Vn),this.vm=(0,f.O4)(this.store.vm$)}ngOnInit(){this.store.getUsers()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exchange"]],standalone:!0,features:[e._Bn([x]),e.jDz],decls:1,vars:0,consts:[[4,"transloco"],[4,"ngIf","ngIfElse"],["error",""],[4,"ngIf"],[1,"card-container"],[3,"user",4,"ngFor","ngForOf"],[3,"user"],[1,"error"],[1,"actions"],[3,"routerLink"]],template:function(t,r){1&t&&e.YNc(0,D,5,2,"ng-container",0)},dependencies:[p.O5,p.sg,g.rH,v.G,c.y4,c.KI,d.r,O],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}h1[_ngcontent-%COMP%]{padding:0 0 2rem}.card-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-gap:1rem}.error[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #50555e;border-radius:.4rem;padding:1.5rem 1rem .5rem;margin:2rem 0}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:1rem;padding:1.5rem 0 .5rem}"]}),n})()}}]);